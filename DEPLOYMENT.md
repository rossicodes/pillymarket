# 🚀 Railway Deployment Guide - Pillymarket MVP

## Prerequisites
- Railway account (https://railway.app)
- Helius API key (https://helius.xyz)
- GitHub repository with latest code

## 📋 Step-by-Step Deployment

### 1. Deploy to Railway
1. **Create New Project** in Railway dashboard
2. **Connect GitHub** repository: `pillymarket`
3. **Add PostgreSQL** database service to your project
4. Railway will auto-deploy from main branch

### 2. Configure Environment Variables
In Railway dashboard → Variables tab, add:

```bash
# Database (auto-generated by Railway PostgreSQL service)
DATABASE_URL=postgresql://postgres:password@host:port/database

# Helius API (get from https://helius.xyz)  
HELIUS_API_KEY=your_helius_api_key_here

# Generate random 32-character string for webhook security
WEBHOOK_SECRET=your_random_32_character_secret_string

# Your Railway app URL (e.g., https://your-app-name.railway.app)
NEXT_PUBLIC_APP_URL=https://your-railway-domain.railway.app
```

### 3. Initialize Database
Once deployed, run in Railway console or via CLI:
```bash
npm run db:setup
```

This will:
- Create all required database tables
- Initialize KOL tracking data
- Set up the database schema

### 4. Setup Helius Webhooks
Run the webhook setup script:
```bash
npm run webhooks:setup
```

This will:
- Create webhooks for all 21 KOL wallets
- Configure real-time transaction monitoring
- Enable live P&L tracking

### 5. Verify Deployment
✅ **App loads at your Railway URL**  
✅ **Database connection works** (no errors in logs)  
✅ **Webhooks are active** (check Helius dashboard)  
✅ **KOL leaderboard displays** (may be empty initially)  

## 🔧 Environment Variables Explained

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | PostgreSQL connection string | `postgresql://user:pass@host:5432/db` |
| `HELIUS_API_KEY` | API key for Solana data | `abc123...` |
| `WEBHOOK_SECRET` | Security token for webhooks | `random32charstring...` |
| `NEXT_PUBLIC_APP_URL` | Your app's public URL | `https://pillymarket.railway.app` |

## 📊 Post-Deployment

### Real-Time Data Flow:
1. **KOLs trade on Pump.Fun** → Solana blockchain
2. **Helius detects trades** → sends webhook to your app  
3. **Your app processes** → updates database with P&L
4. **Live leaderboard** → shows real-time rankings
5. **Users can trade** → buy/sell KOL shares

### Monitoring:
- **Railway logs** - Check for any errors
- **Helius dashboard** - Monitor webhook activity  
- **Database** - Verify trade data is being stored
- **App functionality** - Test trading and leaderboard

## 🎯 Expected Behavior

### Initial State:
- Leaderboard shows all 21 KOLs with 0 P&L
- Users can connect wallets and see $PILLS balance  
- Trading modals work but with demo data

### After Real Data Flows:
- KOLs ranked by actual SOL P&L performance
- Live animations when rankings change
- Real share prices based on trading activity
- Accurate probability calculations

## 🛠️ Troubleshooting

### Common Issues:
1. **Build fails** - Check TypeScript errors in logs
2. **Database errors** - Verify DATABASE_URL is correct  
3. **No webhook data** - Check WEBHOOK_SECRET and Helius setup
4. **App not loading** - Check NEXT_PUBLIC_APP_URL is set

### Debug Commands:
```bash
# Test database connection
npm run db:setup

# Check webhook status  
npm run webhooks:setup

# View logs
railway logs --tail
```

## 🎉 Success!
Your Pillymarket MVP is now live with:
- ✅ Real-time KOL P&L tracking
- ✅ Live leaderboard with animations  
- ✅ Functional share trading system
- ✅ Pump.fun style UI/UX
- ✅ Production-ready infrastructure